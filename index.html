<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TPAO Petroleum Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="index.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>

<body>

<header class="top-header">
  <h1>Türkiye Petrolleri Anonim Ortaklığı (TPAO)</h1>
</header>

<div id="overlay" onclick="closeSidebar()"></div>
<button class="menu-btn" onclick="toggleSidebar()">☰</button>

<aside class="sidebar" id="sidebar">
  <h2 class="logo">TPAO</h2>
  <nav>
    <a onclick="navigate('production')">Production</a>
    <a onclick="navigate('revenue')">Revenue</a>
    <a onclick="navigate('mapPage')">Oil Fields</a>
  </nav>
</aside>

<main class="main">

  <!-- PRODUCTION -->
  <section id="production" class="page active">
    <h1>Oil Production</h1>
    <p>
      Monthly crude oil production trends demonstrating operational growth and
      efficiency improvements.
    </p>

    <canvas id="productionChart"></canvas>

    <!-- WRITE-UP -->
    <p class="visual-writeup">
      This chart illustrates TPAO’s monthly crude oil production performance.
      The steady upward trend reflects improved drilling efficiency, optimized
      reservoir management, and the deployment of advanced production
      technologies across onshore and offshore assets.
    </p>
  </section>

  <!-- REVENUE -->
  <section id="revenue" class="page">
    <h1>Revenue Performance</h1>
    <p>
      Annual revenue performance reflecting TPAO’s contribution to the national
      economy and energy sector.
    </p>

    <canvas id="revenueChart"></canvas>

    <!-- WRITE-UP -->
    <p class="visual-writeup">
      The revenue chart highlights TPAO’s financial growth over recent years.
      Increased production capacity, strategic international partnerships, and
      favorable energy market conditions have strengthened the company’s
      revenue base and long-term economic impact.
    </p>
  </section>

  <!-- MAP -->
  <section id="mapPage" class="page">
    <h1>TPAO Oil Fields</h1>
    <p>
      Interactive map highlighting major oil fields and exploration blocks
      operated by TPAO.
    </p>

    <div id="map"></div>

    <!-- WRITE-UP -->
    <p class="visual-writeup">
      This map provides a geographical overview of TPAO’s key oil fields and
      exploration zones. It demonstrates the company’s strategic footprint
      across Türkiye and neighboring regions, supporting national energy
      security and international upstream operations.
    </p>
  </section>

</main>

<script>
/* ======================
   SIDEBAR CONTROL
====================== */
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('overlay');

function toggleSidebar() {
  sidebar.classList.toggle('show');
  overlay.classList.toggle('show');
}

function closeSidebar() {
  sidebar.classList.remove('show');
  overlay.classList.remove('show');
}

/* ======================
   NAVIGATION + HISTORY
====================== */
function navigate(page) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(page).classList.add('active');

  history.pushState({ page }, "", "#" + page);

  if (page === "mapPage") {
    setTimeout(initMap, 300);
  }

  closeSidebar();
}

/* Phone BACK button opens sidebar */
window.addEventListener("popstate", () => {
  toggleSidebar();
});

/* ======================
   CHARTS
====================== */
document.addEventListener("DOMContentLoaded", () => {

  new Chart(document.getElementById('productionChart'), {
    type: 'line',
    data: {
      labels: ['Jan','Feb','Mar','Apr','May','Jun'],
      datasets: [{
        label: 'Barrels / Day',
        data: [120,135,140,150,145,160],
        borderColor: '#22c55e',
        tension: 0.4
      }]
    }
  });

  new Chart(document.getElementById('revenueChart'), {
    type: 'bar',
    data: {
      labels: ['2019','2020','2021','2022','2023','2024'],
      datasets: [{
        label: 'Revenue (Billion USD)',
        data: [11.2,12.6,14.8,16.3,18.2,19.1],
        backgroundColor: '#1e293b'
      }]
    }
  });

});

/* ======================
   MAP
====================== */
let mapLoaded = false;
function initMap() {
  if (mapLoaded) return;
  mapLoaded = true;

  const map = L.map('map').setView([39, 35], 5);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
  L.marker([37.88, 41.13]).addTo(map).bindPopup("Batman Oil Field");
  L.marker([40.4, 49.9]).addTo(map).bindPopup("Caspian Block");
}
</script>

</body>
</html>
